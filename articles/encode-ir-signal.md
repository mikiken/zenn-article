---
title: "Pythonでエアコンのリモコン信号を解析し自在に操作できるようにする"
emoji: "👋"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["HomeAutomation", "Python"]
published: false
---

この記事は、[CAMPHOR- Advent Calendar 2023](https://advent.camph.net)の5日目の記事です。

## はじめに
この記事は、以下の記事の続きです。
https://zenn.dev/mikiken/articles/decode-ir-signal

前回は、赤外線リモコンの信号をバイナリデータにデコードし、それをパースして以下のように16進数として表記する方法までを説明しました。

```
23cb260100205800c64000000000100000a3
```

この記事では、エアコンのリモコン信号を解析した上で、エアコンの運転状態からリモコン信号を生成する方法について説明します。

## エアコンのリモコン信号解析の難しさ
[前回の記事で説明した方法](https://zenn.dev/mikiken/articles/decode-ir-signal)で、リモコンの各ボタンを押した際の信号を上記のように記録しておき、その信号をそのまま再現して送信すれば、自由にエアコンを操作できると思うかもしれません。

実際、この方法でテレビやシーリングライトなどのリモコン信号を再現することができます。こうした機器のリモコンは、各ボタンに対して決められた信号を送信しているだけだからです。

それに対し、エアコンのリモコン信号は、この方法では再現できません。なぜなら、エアコンのリモコンは、各ボタンに対して決められた信号を送信しているわけではなく、**エアコンの運転状態に応じて毎回異なる信号を送信しているからです**。

端的にいえば、テレビの音量を上げるボタンを押した際に「音量を上げたい」という信号が送信されるのに対し、エアコンの温度を上げるボタンを押すと、「温度を25℃にしたい」「温度を26℃にしたい」のように、その時点でのエアコンの運転状態に応じて異なる信号が送信されます。

さらに詳しく説明すると、エアコンのリモコン信号には、運転モード(冷房, 暖房, ...)、温度、風量、風向といった、**エアコンの運転状態を指定するパラメータが全て含まれています**。「温度を上げる」ボタンを押した際には、風向や風量といったパラメータも送信されているのです。[^1]

[^1]: 昔、「エアコンのリモコンの信号が正しく本体に届かなかった場合、リモコンに表示されている状態と本体側の状態がズレてしまうのではないか?」と思っていました。実際には、次に本体がリモコンの信号を受信したときに、リモコンと本体の状態は正しく同期されていたのです。

すなわち、エアコンのリモコン信号を再現するには、**送信信号のどのフィールドがどのパラメータに対応しているのか**を全て調べる必要があります。